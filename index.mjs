/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"readable-stream";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-error@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-inherit@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-property@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-accessor@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-write-accessor@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/random-base-hypergeometric@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-from-string@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-next-tick@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-number@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import f from"debug";var v={objectMode:!1,encoding:null,sep:"\n",copy:!0,siter:1e308},y=l,w=g,_=u.isPrimitive,x=c.isPrimitive,M=j.isPrimitive,E=b.isPrimitive,T=i.isPrimitive;var O=function(e,t){return y(t)?w(t,"sep")&&(e.sep=t.sep,!M(e.sep))?new TypeError("invalid option. `sep` option must be a primitive string. Option: `"+e.sep+"`."):w(t,"objectMode")&&(e.objectMode=t.objectMode,!_(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):w(t,"encoding")&&(e.encoding=t.encoding,!M(e.encoding)&&null!==e.encoding)?new TypeError("invalid option. `encoding` option must be a primitive string or null. Option: `"+e.encoding+"`."):w(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!x(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):w(t,"iter")&&(e.iter=t.iter,!T(e.iter))?new TypeError("invalid option. `iter` option must be a nonnegative integer. Option: `"+e.iter+"`."):w(t,"siter")&&(e.siter=t.siter,!E(e.siter))?new TypeError("invalid option. `siter` option must be a positive integer. Option: `"+e.siter+"`."):(w(t,"prng")&&(e.prng=t.prng),w(t,"seed")&&(e.seed=t.seed),w(t,"state")&&(e.state=t.state),w(t,"copy")&&(e.copy=t.copy),null):new TypeError("invalid argument. Options must be an object. Value: `"+t+"`.")},V=f("random:streams:hypergeometric"),k=t.Readable,N=i,P=r,L=n,W=s,R=o,S=e,G=d,q=a,C=p.factory,J=m,K=h,A=v,F=O,I=V;function z(e,t,i,r){var n,s;if(!(this instanceof z))return arguments.length>3?new z(e,t,i,r):new z(e,t,i);if(!N(e))throw new TypeError("invalid argument. `N` must be a nonnegative integer. Value: `"+e+"`.");if(!N(t))throw new TypeError("invalid argument. `K` must be a nonnegative integer. Value: `"+t+"`.");if(!N(i))throw new TypeError("invalid argument. `n` must be a nonnegative integer. Value: `"+i+"`.");if(i>e)throw new RangeError("invalid argument. `n` must be less than or equal to `N`. Value: `"+i+"`.");if(t>e)throw new RangeError("invalid argument. `K` must be less than or equal to `N`. Value: `"+t+"`.");if(n=L(A),arguments.length>3&&(s=F(n,r)))throw s;return I("Creating a readable stream configured with the following options: %s.",JSON.stringify(n)),k.call(this,n),R(this,"_destroyed",!1),S(this,"_objectMode",n.objectMode),S(this,"_sep",n.sep),S(this,"_iter",n.iter),S(this,"_siter",n.siter),R(this,"_i",0),S(this,"_prng",C(e,t,i,n)),S(this,"PRNG",this._prng.PRNG),this}W(z,k),G(z.prototype,"seed",(function(){return this._prng.seed})),G(z.prototype,"seedLength",(function(){return this._prng.seedLength})),q(z.prototype,"state",(function(){return this._prng.state}),(function(e){this._prng.state=e})),G(z.prototype,"stateLength",(function(){return this._prng.stateLength})),G(z.prototype,"byteLength",(function(){return this._prng.byteLength})),S(z.prototype,"_read",(function(){var e,t;if(!this._destroyed)for(e=!0;e;){if(this._i+=1,this._i>this._iter)return I("Finished generating pseudorandom numbers."),this.push(null);t=this._prng(),I("Generated a new pseudorandom number. Value: %d. Iter: %d.",t,this._i),!1===this._objectMode&&(t=t.toString(),t=1===this._i?J(t):J(this._sep+t)),e=this.push(t),this._i%this._siter==0&&this.emit("state",this.state)}})),S(z.prototype,"destroy",(function(e){var t;return this._destroyed?(I("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,K((function(){e&&(I("Stream was destroyed due to an error. Error: %s.",P(e)?e.message:JSON.stringify(e)),t.emit("error",e));I("Closing the stream..."),t.emit("close")})),this)}));var B=l,D=n,H=z;var Q=n,U=z;var X=e,Y=z,Z=function(e,t,i,r){var n,s;return s=1===(n=arguments.length)?Q(e,1):n>3?Q(r,1):{},n<3?o:d;function o(e,t,i){return new U(e,t,i,s)}function d(){return new U(e,t,i,s)}};X(Y,"objectMode",(function(e,t,i,r){var n;if(arguments.length>3){if(!B(n=r))throw new TypeError("invalid argument. Options must be an object. Value: `"+n+"`.");n=D(r,1)}else n={};return n.objectMode=!0,new H(e,t,i,n)})),X(Y,"factory",Z);var $=Y;export{$ as default};
//# sourceMappingURL=index.mjs.map
