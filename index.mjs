// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-error@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-inherit@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-property@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-accessor@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-write-accessor@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/random-base-hypergeometric@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-from-string@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-next-tick@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-number@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";function b(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})})),t}var v="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function j(){throw new Error("setTimeout has not been defined")}function y(){throw new Error("clearTimeout has not been defined")}var w=j,_=y;function x(e){if(w===setTimeout)return setTimeout(e,0);if((w===j||!w)&&setTimeout)return w=setTimeout,setTimeout(e,0);try{return w(e,0)}catch(t){try{return w.call(null,e,0)}catch(t){return w.call(this,e,0)}}}"function"==typeof v.setTimeout&&(w=setTimeout),"function"==typeof v.clearTimeout&&(_=clearTimeout);var T,M=[],E=!1,O=-1;function P(){E&&T&&(E=!1,T.length?M=T.concat(M):O=-1,M.length&&k())}function k(){if(!E){var e=x(P);E=!0;for(var t=M.length;t;){for(T=M,M=[];++O<t;)T&&T[O].run();O=-1,t=M.length}T=null,E=!1,function(e){if(_===clearTimeout)return clearTimeout(e);if((_===y||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(e);try{_(e)}catch(t){try{return _.call(null,e)}catch(t){return _.call(this,e)}}}(e)}}function N(e,t){this.fun=e,this.array=t}N.prototype.run=function(){this.fun.apply(null,this.array)};function R(){}var q=R,L=R,W=R,D=R,V=R,S=R,A=R;var z=v.performance||{},G=z.now||z.mozNow||z.msNow||z.oNow||z.webkitNow||function(){return(new Date).getTime()};var C=new Date;var J={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];M.push(new N(e,t)),1!==M.length||E||x(k)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:q,addListener:L,once:W,off:D,removeListener:V,removeAllListeners:S,emit:A,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*G.call(z),r=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(r-=e[0],(i-=e[1])<0&&(r--,i+=1e9)),[r,i]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-C)/1e3}},K=require("stream");"disable"===J.env.READABLE_STREAM&&K?(module.exports=K,exports=module.exports=K.Readable,exports.Readable=K.Readable,exports.Writable=K.Writable,exports.Duplex=K.Duplex,exports.Transform=K.Transform,exports.PassThrough=K.PassThrough,exports.Stream=K):(exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=K||exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"));var B=b(Object.freeze({__proto__:null})),F={objectMode:!1,encoding:null,sep:"\n",copy:!0,siter:1e308},I=l,H=m,Q=h.isPrimitive,U=c.isPrimitive,X=f.isPrimitive,Y=g.isPrimitive,Z=t.isPrimitive;var $=function(e,t){return I(t)?H(t,"sep")&&(e.sep=t.sep,!X(e.sep))?new TypeError("invalid option. `sep` option must be a primitive string. Option: `"+e.sep+"`."):H(t,"objectMode")&&(e.objectMode=t.objectMode,!Q(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):H(t,"encoding")&&(e.encoding=t.encoding,!X(e.encoding)&&null!==e.encoding)?new TypeError("invalid option. `encoding` option must be a primitive string or null. Option: `"+e.encoding+"`."):H(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!U(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):H(t,"iter")&&(e.iter=t.iter,!Z(e.iter))?new TypeError("invalid option. `iter` option must be a nonnegative integer. Option: `"+e.iter+"`."):H(t,"siter")&&(e.siter=t.siter,!Y(e.siter))?new TypeError("invalid option. `siter` option must be a positive integer. Option: `"+e.siter+"`."):(H(t,"prng")&&(e.prng=t.prng),H(t,"seed")&&(e.seed=t.seed),H(t,"state")&&(e.state=t.state),H(t,"copy")&&(e.copy=t.copy),null):new TypeError("invalid argument. Options must be an object. Value: `"+t+"`.")};module.exports=void 0!==J&&"renderer"===J.type?require("./browser.js"):require("./node.js");var ee=b(Object.freeze({__proto__:null}))("random:streams:hypergeometric"),te=B.Readable,re=t,ie=r,ne=i,se=n,oe=s,ae=e,de=o,ue=a,pe=d.factory,le=u,me=p,he=F,ce=$,fe=ee;function ge(e,t,r,i){var n,s;if(!(this instanceof ge))return arguments.length>3?new ge(e,t,r,i):new ge(e,t,r);if(!re(e))throw new TypeError("invalid argument. `N` must be a nonnegative integer. Value: `"+e+"`.");if(!re(t))throw new TypeError("invalid argument. `K` must be a nonnegative integer. Value: `"+t+"`.");if(!re(r))throw new TypeError("invalid argument. `n` must be a nonnegative integer. Value: `"+r+"`.");if(r>e)throw new RangeError("invalid argument. `n` must be less than or equal to `N`. Value: `"+r+"`.");if(t>e)throw new RangeError("invalid argument. `K` must be less than or equal to `N`. Value: `"+t+"`.");if(n=ne(he),arguments.length>3&&(s=ce(n,i)))throw s;return fe("Creating a readable stream configured with the following options: %s.",JSON.stringify(n)),te.call(this,n),oe(this,"_destroyed",!1),ae(this,"_objectMode",n.objectMode),ae(this,"_sep",n.sep),ae(this,"_iter",n.iter),ae(this,"_siter",n.siter),oe(this,"_i",0),ae(this,"_prng",pe(e,t,r,n)),ae(this,"PRNG",this._prng.PRNG),this}se(ge,te),de(ge.prototype,"seed",(function(){return this._prng.seed})),de(ge.prototype,"seedLength",(function(){return this._prng.seedLength})),ue(ge.prototype,"state",(function(){return this._prng.state}),(function(e){this._prng.state=e})),de(ge.prototype,"stateLength",(function(){return this._prng.stateLength})),de(ge.prototype,"byteLength",(function(){return this._prng.byteLength})),ae(ge.prototype,"_read",(function(){var e,t;if(!this._destroyed)for(e=!0;e;){if(this._i+=1,this._i>this._iter)return fe("Finished generating pseudorandom numbers."),this.push(null);t=this._prng(),fe("Generated a new pseudorandom number. Value: %d. Iter: %d.",t,this._i),!1===this._objectMode&&(t=t.toString(),t=1===this._i?le(t):le(this._sep+t)),e=this.push(t),this._i%this._siter==0&&this.emit("state",this.state)}})),ae(ge.prototype,"destroy",(function(e){var t;return this._destroyed?(fe("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,me((function(){e&&(fe("Stream was destroyed due to an error. Error: %s.",ie(e)?e.message:JSON.stringify(e)),t.emit("error",e));fe("Closing the stream..."),t.emit("close")})),this)}));var be=l,ve=i,je=ge;var ye=i,we=ge;var _e=e,xe=ge,Te=function(e,t,r,i){var n;if(arguments.length>3){if(!be(n=i))throw new TypeError("invalid argument. Options must be an object. Value: `"+n+"`.");n=ve(i,1)}else n={};return n.objectMode=!0,new je(e,t,r,n)},Me=function(e,t,r,i){var n,s;return s=1===(n=arguments.length)?ye(e,1):n>3?ye(i,1):{},n<3?o:a;function o(e,t,r){return new we(e,t,r,s)}function a(){return new we(e,t,r,s)}};_e(xe,"objectMode",Te),_e(xe,"factory",Me);var Ee=xe;export{Ee as default,Me as factory,Te as objectMode};
//# sourceMappingURL=index.mjs.map
